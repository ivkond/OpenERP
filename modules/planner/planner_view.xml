<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem name="Planner"
                  id="menu_planner_main_menu"
                  sequence="1"/>

        <record id="planner_money_wizard_form" model="ir.ui.view">
            <field name="name">Completion</field>
            <field name="model">planner.money.wizard</field>
            <field name="arch" type="xml">
                <form string="Completion" version="7.0">
                    <group>
                        <field name="amount_factual"/>
                        <field name="date_completed"/>
                    </group>
                    <footer>
                        <button string="Complete" class="oe_highlight" type="object" name="action_complete"/>
                        or
                        <button string="Cancel" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

        <record id="planner_money_form" model="ir.ui.view">
            <field name="name">Money movement form</field>
            <field name="model">planner.money</field>
            <field name="arch" type="xml">
                <form string="Money movement" version="7.0">
                <header>
                    <button name="button_complete" states="planned" type="object" string="Complete" class="oe_highlight"/>
                    <button name="button_cancel" states="planned" type="object" string="Cancel"/>
                    <field name="state" nolabel="1" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group string="Information">
                            <field name="purpose" attrs="{'readonly': [('state', '!=', 'planned')]}"/>
                            <field name="type" attrs="{'readonly': [('state', '!=', 'planned')]}"/>
                            <field name="date" attrs="{'readonly': [('state', '!=', 'planned')]}"/>
                            <field name="date_completed" states="completed" attrs="{'readonly': [('state', '!=', 'planned')]}"/>
                            <field name="description"/>
                        </group>
                        <group string="Amount">
                            <field name="amount_expected" attrs="{'readonly': [('state', '!=', 'planned')]}"/>
                            <field name="amount_factual" states="completed" readonly="1"/>
                        </group>
                    </group>
                    <group/>
                </sheet>
                </form>
            </field>
        </record>

        <record id="planner_money_tree" model="ir.ui.view">
            <field name="name">Money movement tree</field>
            <field name="model">planner.money</field>
            <field name="arch" type="xml">
                <tree string="Money movement" colors="grey:state=='cancel';blue:state=='completed'">
                    <field name="purpose"/>
                    <field name="date"/>
                    <field name="date_completed"/>
                    <field name="type"/>
                    <field name="amount_expected"/>
                    <field name="amount_factual"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_planner_money_movements">
            <field name="name">Money movements</field>
            <field name="res_model">planner.money</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('task_id', '=', 'None')]</field>
        </record>
        <record model="ir.actions.act_window" id="action_planner_money_movements_in">
            <field name="name">Incoming money movements</field>
            <field name="res_model">planner.money</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type', '=', 'in')]</field>
            <field name="context">{'default_type': 'in'}</field>
        </record>
        <record model="ir.actions.act_window" id="action_planner_money_movements_out">
            <field name="name">Outgoing money movements</field>
            <field name="res_model">planner.money</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type', '=', 'out')]</field>
            <field name="context">{'default_type': 'out'}</field>
        </record>

        <menuitem name="Money"
                  parent="menu_planner_main_menu"
                  id="menu_planner_money_main_menu"
                  sequence="10"/>
        <menuitem action="action_planner_money_movements"
                  name="Money movements"
                  parent="menu_planner_money_main_menu"
                  id="menu_planner_money_movements"
                  sequence="1"/>
        <menuitem action="action_planner_money_movements_in"
                  name="Incoming movements"
                  parent="menu_planner_money_main_menu"
                  id="menu_planner_money_movements_in"
                  sequence="2"/>
        <menuitem action="action_planner_money_movements_out"
                  name="Outgoing movements"
                  parent="menu_planner_money_main_menu"
                  id="menu_planner_money_movements_out"
                  sequence="3"/>

        <record id="planner_task_form" model="ir.ui.view">
            <field name="name">Task form</field>
            <field name="model">planner.task</field>
            <field name="arch" type="xml">
                <form string="Task" version="7.0">
                <header>
                    <button name="button_proceed" states="draft" type="object" string="Proceed" class="oe_highlight"/>
                    <button name="button_complete" states="proceed" type="object" string="Complete" class="oe_highlight"/>
                    <button name="button_cancel" states="proceed" type="object" string="Cancel"/>
                    <field name="state" nolabel="1" widget="statusbar"/>
                </header>
                <sheet>
                    <group>
                        <group string="Information">
                            <field name="name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="type" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="priority" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="is_have_outlay" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="date" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="location_id" attrs="{'readonly': [('state', 'in', ['completed', 'cancel'])]}"/>
                            <field name="description"/>
                        </group>
                        <group/>
                    </group>
                    <group string="Outlay" attrs="{'invisible': [('is_have_outlay', '=', False)]}">
                        <field name="outlay_ids" nolabel="1" attrs="{'readonly': [('state', 'in', ['completed', 'cancel'])]}">
                            <tree string="Outlay" colors="grey:state=='cancel';blue:state=='completed'">
                                <field name="purpose"/>
                                <field name="amount_expected"/>
                                <field name="type"/>
                                <field name="date"/>
                                <field name="state"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
                </form>
            </field>
        </record>

        <record id="planner_task_tree" model="ir.ui.view">
            <field name="name">Task tree</field>
            <field name="model">planner.task</field>
            <field name="arch" type="xml">
                <tree string="Tasks">
                    <field name="name"/>
                    <field name="priority"/>
                    <field name="type"/>
                    <field name="state"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_planner_tasks">
            <field name="name">Tasks</field>
            <field name="res_model">planner.task</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem name="Tasks"
                  parent="menu_planner_main_menu"
                  id="menu_planner_tasks_main_menu"
                  sequence="5"/>
        <menuitem action="action_planner_tasks"
                  name="All tasks"
                  parent="menu_planner_tasks_main_menu"
                  id="menu_planner_tasks_all"
                  sequence="2"/>
    </data>
</openerp>